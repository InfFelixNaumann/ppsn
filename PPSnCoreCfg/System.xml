<?xml version="1.0" encoding="utf-8" ?>
<fragment xmlns="http://tecware-gmbh.de/dev/des/2014"
		xmlns:pps="http://tecware-gmbh.de/dev/des/2015/ppsn">

	<server>
		<load>DEM.PPSn</load>
	</server>

	<http>
		<prefix>$(webBinding)/</prefix>
		<access id="root" scheme="ntlm">$(webBinding)/</access>
		<access id="ppsnInfo" scheme="none">$(webBinding)/ppsn/info.xml</access>
		<access id="ppsnWpf" scheme="ntlm">$(webBinding)/ppsn/wpf/</access>
	</http>

	<pps:ppsn name="ppsn">
		<pps:sysDataSource name="sys" />

		<pps:wpf name="wpf">
			<pps:wpfSource id="core" directory="ClientWpf/Panes" virtualPath="panes" />
			<pps:theme id="default" file="ClientWpf/default.xaml"/>
			<pps:theme id="blue" file="ClientWpf/default.xaml"/>
			<pps:theme id="green" file="ClientWpf/green.xaml"/>

			<pps:action name="close" displayName="Schließen" priority="-1000" displayGlyph="57639">
				<pps:code><![CDATA[ Window:Close() ]]></pps:code>
			</pps:action>
			<!--<pps:template id="templates" file="ClientWpf\Templates\MasterData.Contacts.xaml"/>-->
		</pps:wpf>

		<pps:excel name="excel" />

		<pps:register source="sys">
			<pps:field name="sys.Fields.Path" dataType="string" />
			<pps:field name="sys.Fields.ContentType" dataType="string" />
			<pps:field name="sys.Fields.ContentEncoding" dataType="string" />
			<pps:field name="sys.Fields.ContentSize" dataType="long" />
			<pps:field name="sys.Fields.LastModificationStamp" dataType="long" />
			<pps:field name="sys.Fields.PrimaryKey" dataType="long" />
			<pps:field name="sys.Fields.Text" dataType="string" />
			<pps:field name="sys.Fields.Long" dataType="long" />
			<pps:field name="sys.Fields.Bit" dataType="bool" />
			<pps:field name="sys.Fields.Blob" dataType="blob" />

			<pps:view name="wpf.sync">
				<pps:source type="view">wpf/GetApplicationFilesSelector</pps:source>
			</pps:view>

			<pps:field name="wpf.sync.Path" inherited="sys.Fields.Path" />
			<pps:field name="wpf.sync.Length" inherited="sys.Fields.ContentSize" />
			<pps:field name="wpf.sync.LastWriteTime" dataType="datetime" />

			<pps:field name="wpf.reports.Type" dataType="string" displayName="Type" />
			<pps:field name="wpf.reports.ReportId" dataType="string" displayName="Report" />
			<pps:field name="wpf.reports.DisplayName" dataType="string" displayName="Bezeichnung" />

			<pps:view name="wpf.reports">
				<pps:source type="view">excel/GetExcelReportItemsSelector</pps:source>
			</pps:view>

			<pps:field name="sys.views.Name" dataType="string" />
			<pps:field name="sys.views.DisplayName" dataType="string" />
			<pps:field name="sys.views.SecurityToken" dataType="string" />
			<pps:field name="sys.views.IsVisible" dataType="bool" />

			<pps:view name="sys.views">
				<pps:source type="view">GetViewDefinitionSelector</pps:source>
			</pps:view>
		</pps:register>

		<pps:register source="main">

			<!-- object fields -->
			<pps:field name="dbo.ObjK.Id" />
			<pps:field name="dbo.ObjK.Guid" />
			<pps:field name="dbo.ObjK.Typ" />
			<pps:field name="dbo.ObjK.Nr" />
			<pps:field name="dbo.ObjK.HeadRevId" />
			<pps:field name="dbo.ObjK.CurRevId" />
			<pps:field name="dbo.ObjK.SyncToken" />

			<!-- revision fields -->
			<pps:field name="dbo.Objr.Id" />
			<pps:field name="dbo.Objr.ParentId" />
			<pps:field name="dbo.Objr.ObjkId" />
			<pps:field name="dbo.Objr.Tags" />
			<pps:field name="dbo.Objr.Document" />
			<pps:field name="dbo.Objr.CreateDate" />
			<pps:field name="dbo.Objr.CreateUserId" />

			<!-- address fields -->
			<pps:field name="dbo.Adre.Id" />
			<pps:field name="dbo.Adre.ObjkId" />
			<pps:field name="dbo.Adre.Name" displayName="Name" />
			<pps:field name="dbo.Adre.Postfach" displayName="Postfach" />
			<pps:field name="dbo.Adre.Zusatz" displayName="Zusatz" />
			<pps:field name="dbo.Adre.Strasse" displayName="Straße / Nr." />
			<pps:field name="dbo.Adre.Ort" displayName="Ort" />
			<pps:field name="dbo.Adre.Region" displayName="Region" />
			<pps:field name="dbo.Adre.Plz" displayName="Postleitzahl" />
			<pps:field name="dbo.Adre.LandId" displayName="Land" />
			<pps:field name="dbo.Adre.Adresse" displayName="Adresse" />
			<pps:field name="dbo.Adre.Changed" >
				<pps:attribute name="dataType">bool</pps:attribute>
				<pps:attribute name="displayName">Andere Adresse</pps:attribute>
			</pps:field>
			<pps:field name="dbo.Adre.Template" />
			<pps:field name="dbo.Adre.Versand" >
				<pps:attribute name="dataType">bool</pps:attribute>
				<pps:attribute name="displayName">Versand</pps:attribute>
			</pps:field>
			<pps:field name="dbo.Adre.Rechnung" >
				<pps:attribute name="dataType">bool</pps:attribute>
				<pps:attribute name="displayName">Rechnung</pps:attribute>
			</pps:field>

			<!-- objects -->
			<pps:view name="dbo.objects">
				<pps:source type="view">dbo.objects</pps:source>
			</pps:view>

			<!-- base dataset -->
			<pps:dataset name="coreDataSet">
				<!-- define the base table -->
				<pps:table name="Head">
					<pps:column name="Id" fieldName="dbo.Objk.Id" isPrimary="true" />
					<pps:column name="CurRevId" fieldName="dbo.Objk.CurRevId" />
					<pps:column name="HeadRevId" fieldName="dbo.Objk.HeadRevId" />
					<pps:column name="Nr" fieldName="dbo.Objk.Nr" />
					<pps:column name="Typ" fieldName="dbo.Objk.Typ" />
					<pps:column name="Guid" fieldName="dbo.Objk.Guid" />
				</pps:table>

				<pps:table name="Revision">
					<pps:column name="Id" fieldName="dbo.Objr.Id" isPrimary="true" />
					<pps:relation name="ObjkId" fieldName="dbo.Objr.ObjkId" parentTable="Head" parentColumn="Id" parentType="Root" relationName="ObjrObjk" />
				</pps:table>

			</pps:dataset>

			<pps:field name="dbo.Knst.Id" />

			<!-- definition for currencies -->
			<pps:field name="dbo.Waeh.Iso" />
			<pps:field name="dbo.Waeh.Symbol" />
			<pps:field name="dbo.Waeh.Name" />
			<pps:field name="dbo.Waeh.Kurs" />
			<pps:field name="dbo.Waeh.System" />

			<!-- definition for countries -->
			<pps:field name="dbo.Land.Id" />
			<pps:field name="dbo.Land.Iso" />
			<pps:field name="dbo.Land.Name" />
			<pps:field name="dbo.Land.EnglishName" />
			<pps:field name="dbo.Land.Iso3" />
			<pps:field name="dbo.Land.Tld" />
			<pps:field name="dbo.Land.Vorwahl" />
			<pps:field name="dbo.Land.Zone" />
			<pps:field name="dbo.Land.PostAdr" />

			<!-- definition for contact groups -->
			<pps:field name="dbo.Kgrp.Name" />

			<!-- definition for postal codes -->
			<pps:field name="dbo.Plzd.Plz" />
			<pps:field name="dbo.Plzd.Ort" />
			<pps:field name="dbo.Plzd.LandId" />
			<pps:field name="dbo.Plzd.Vorwahl" />
			<pps:field name="dbo.Plzd.Kfz" />
			<pps:field name="dbo.Plzd.AmtSchl" />
			<pps:field name="dbo.Plzd.RegSchl" />
			<pps:field name="dbo.Plzd.Region" />

			<!-- definition for quantity units -->
			<pps:field name="dbo.Mein.Name" />

			<pps:dataset name="masterdata">
				<pps:table name="Header">
					<pps:meta name="syncType">None</pps:meta>
					<pps:column name="_rowId" fieldName="sys.Fields.PrimaryKey" isPrimary="true" />
					<pps:column name="SchemaStamp" fieldName="sys.Fields.LastModificationStamp">
						<pps:meta name="IsNull">true</pps:meta>
					</pps:column>
					<pps:column name="SchemaContent" fieldName="sys.Fields.Text">
						<pps:meta name="IsNull">true</pps:meta>
					</pps:column>
					<pps:column name="SyncStamp" fieldName="sys.Fields.LastModificationStamp">
						<pps:meta name="IsNull">true</pps:meta>
					</pps:column>
					<pps:column name="SyncToken" fieldName="sys.Fields.Long">
						<pps:meta name="IsNull">true</pps:meta>
					</pps:column>
				</pps:table>

				<!--<pps:table name="Objects">
					
				</pps:table>

				<pps:table name="ObjectLinks">

				</pps:table>

				<pps:table name="ObjectTags">

				</pps:table>-->

				<pps:table name="OfflineCache">
					<pps:meta name="syncType">TimeStamp: wpf.sync, ContentLastModification</pps:meta>
					<pps:column name="Path" isPrimary="true" fieldName="sys.Fields.Path" />
					<pps:column name="ContextType" fieldName="sys.Fields.ContentType" />
					<pps:column name="ContentEncoding" fieldName="sys.Fields.ContentEncoding" />
					<pps:column name="ContentSize" fieldName="sys.Fields.ContentSize">
						<pps:meta name="syncSource">Length</pps:meta>
					</pps:column>
					<pps:column name="ContentLastModification" fieldName="sys.Fields.LastModificationStamp">
						<pps:meta name="syncSource">LastWriteTime</pps:meta>
					</pps:column>
					<pps:column name="Content" fieldName="sys.Fields.Blob" />
					<pps:column name="LocalPath" fieldName="sys.Fields.Path" />
				</pps:table>

				<!--<pps:table name="Waeh">
					<pps:column name="Id" fieldName="dbo.Knst.Id" isPrimary="true" />
					<pps:column name="ISO" fieldName="dbo.Waeh.Iso"/>
					<pps:column name="Symbol" fieldName="dbo.Waeh.Symbol"/>
					<pps:column name="Name" fieldName="dbo.Waeh.Name"/>
					<pps:column name="Kurs" fieldName="dbo.Waeh.Kurs"/>
					<pps:column name="System" fieldName="dbo.Waeh.System"/>
				</pps:table>-->

				<pps:table name="Land">
					<pps:meta name="syncType">ChangeTracking: dbo.Land</pps:meta>
					<pps:column name="Id" fieldName="dbo.Land.Id" isPrimary="true" />
					<pps:column name="ISO" fieldName="dbo.Land.Iso"/>
					<pps:column name="Name" fieldName="dbo.Land.Name"/>
					<pps:column name="EnglishName" fieldName="dbo.Land.EnglishName"/>
					<pps:column name="ISO3" fieldName="dbo.Land.Iso3"/>
					<pps:column name="Tld" fieldName="dbo.Land.Tld"/>
					<pps:column name="Vorwahl" fieldName="dbo.Land.Vorwahl"/>
					<pps:column name="EuroZone" fieldName="dbo.Land.Zone"/>
					<pps:column name="PostAdr" fieldName="dbo.Land.PostAdr"/>
				</pps:table>

				<!--<pps:table name="Kgrp">
					<pps:column name="Id" fieldName="dbo.Knst.Id" isPrimary="true" />
					<pps:column name="Name" fieldName="dbo.Kgrp.Name"/>
				</pps:table>

				<pps:table name="Plzd">
					<pps:column name="Id" fieldName="dbo.Knst.Id" isPrimary="true" />
					<pps:column name="Plz" fieldName="dbo.Plzd.Plz"/>
					<pps:column name="Ort" fieldName="dbo.Plzd.Ort"/>
					<pps:column name="LandId" fieldName="dbo.Plzd.LandId"/>
					<pps:column name="Vorwahl" fieldName="dbo.Plzd.Vorwahl"/>
					<pps:column name="Kfz" fieldName="dbo.Plzd.Kfz"/>
					<pps:column name="AmtSchl" fieldName="dbo.Plzd.AmtSchl"/>
					<pps:column name="RegSchl" fieldName="dbo.Plzd.RegSchl"/>
					<pps:column name="Region" fieldName="dbo.Plzd.Region"/>
				</pps:table>

				<pps:table name="Mein">
					<pps:column name="Id" fieldName="dbo.Knst.Id" isPrimary="true" />
					<pps:column name="Name" fieldName="dbo.Mein.Name"/>
				</pps:table>-->
			</pps:dataset>
		</pps:register>
	</pps:ppsn>
</fragment>